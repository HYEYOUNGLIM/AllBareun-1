<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.allbareun.web.dao.GoalDao">


   <select id="getViewList" resultType="com.allbareun.web.entity.GoalView">
      select * from GoalView where publicStatus=1
<if test="categories != null and categories !=''">       
and categories like concat('%',replace(#{categories}, ',','%'),'%')
</if>
<if test="startDate != null and startDate !=''"> 
and date_format(startDate, '%Y-%m-%d') &gt;=#{startDate} 
</if>
<if test="endDate != null and endDate !=''"> 
and date_format(endDate, '%Y-%m-%d')&lt;=#{endDate} 
</if>
<if test="days != null and days !=''"> 
and days like concat('%',replace(#{days}, ',','%'),'%') 
</if>
<if test="totalParticipants != null and totalParticipants !=0"> 
and totalParticipants = #{totalParticipants} 
</if>
<if test="query != null and query !=''"> 
and title like '%${query}%';
</if>
   </select>
</mapper>